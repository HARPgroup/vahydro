#For identifying stream-watershed shape/GIS:
# Ben's Branch downstream of impoundment
# plat_bb = 36.916388888900; plon_bb = -82.626666666700
# Impoundment intake
plat_imp = 36.916388888900; plon_imp = -82.626666666700
# Entire drainage above Powell confluence
out_point_bb = sf::st_sfc(sf::st_point(c(plon_bb, plat_bb)), crs = 4326)
# DA Above dam
out_point_imp = sf::st_sfc(sf::st_point(c(plon_imp, plat_imp)), crs = 4326)
nhd_out_imp <- memo_get_nhdplus(out_point_imp)
basepath='/var/www/R';
source(paste(basepath,'config.R',sep='/'))
library('knitr')
library("hydrotools")
library(nhdplusTools)
#> USGS Support Package: https://owi.usgs.gov/R/packages.html#support
library(sf)
library("sqldf")
library("stringr")
library("rjson")
install.package("rjson")
install.packages("rjson")
# DA Above dam
out_point_imp = sf::st_sfc(sf::st_point(c(plon_imp, plat_imp)), crs = 4326)
nhd_out_imp <- memo_get_nhdplus(out_point_imp)
nhd_out_imp <- get_nhdplus(out_point_imp)
install.packages("rjson")
library(rjson)
# DA Above dam
out_point_imp = sf::st_sfc(sf::st_point(c(plon_imp, plat_imp)), crs = 4326)
nhd_out_imp <- get_nhdplus(out_point_imp)
out_point_imp
nhd_out_imp <- get_nhdplus(out_point_imp)
nhd_out_imp
dasqmi_imp <- 0.386102 * nhd_out_imp$totdasqkm
dasqmi_imp
map_imp <- plot_nhdplus((list(nhd_out_imp$comid)), zoom = 14)
print(map_imp)
View(nhd_out_imp)
names(nhd_out_imp)
get_UT("470058437")
nhdplusTools::get_UT(nhd_out_imp,nhd_out_imp$fromnode)
nhdplusTools::get_UT(nhd_out_imp,nhd_out_imp$fromnode)
nhdplusTools::get_UT(nhd_out_imp,nhd_out_imp$tonode)
nhd_out_imp$tonode
nhd_out_imp
basin <- get_nhdplus(map_imp$basin)
basin <- get_nhdplus(map_imp$basin)
basin
View(basin)
basin$comid
map_imp
View(map_imp)
map_imp$basin
nhd_out_imp$totdasqkm
map_imp
map_imp$basin
plot(map_imp$basin)
plot(map_imp$flowline)
plot(map_imp$outlets)
plot(map_imp$plot_bbox)
plot(map_imp$catchment)
map_imp$catchment
map_imp$off_network_wtbd
map_imp$network_wtbd
nhd_out_imp$comid
nhd_out_imp$areasqkm
nhd_out_imp$fromnode
nhd_out_imp$tonode
dasqmi_imp <- 0.386102 * nhd_out_imp$totdasqkm
dasqmi_imp
nhd_out_imp$slope
nhd_out_imp$lengthkm
nhd_out_imp$lengthkm * 1000 * 100 /2.54 /12
nhd_out_imp$comid
1.11*5280
384 * 43560 * (12^3) / 231 / 1000000
124 / 43560 / (12^3) * 231 * 1000000
1 / 43560 / (12^3) * 231 * 1000000
202+182
3215.9-3155
3287.5-3215
#The volume weight stage of the dam:
((3215.9-3155) * 182 + (3287.5-3215) * 202) / 384
477 * 43560 * (12^3) / 231 / 1000000
17.5+8.3
#The volume weight stage of the dam:
((3215.9-3155) * 182 + (3287.5-3215) * 202) / (182+202)
((3215.9-3155) * 200 + (3287.5-3215) * 277) / (200+277)
((3218-3155) * 200 + (3295.5-3215) * 277) / (200+277)

MAP
NAME WATERUSE
SIZE 900 600
STATUS ON
#SYMBOLSET "./sym_wateruse.sym"
# for map in dd
EXTENT  -83.6754150390625 36.5407371520996 -75.2422637939453 39.4660148620605
UNITS DD
# for map in utm 83z18
#UNITS METERS
SHAPEPATH "data"
FONTSET "./fonts.txt"
PROJECTION
  "init=epsg:4326"
END
DEBUG ON
CONFIG "MS_ERRORFILE" "/tmp/mapserver.log"

SYMBOL
  NAME 'hatch-simple'
  TYPE HATCH
END

SYMBOL
  NAME 'circle'
  TYPE ELLIPSE
  POINTS 1 1 END
  FILLED TRUE
END

LEGEND 
   IMAGECOLOR 255 250 240
   OUTLINECOLOR 0 0 0 
   KEYSIZE 16 16
   STATUS EMBED
   #TRANSPARENT OFF
   #TRANSPARENCY 50
   LABEL
     COLOR 0 0 0
     #SHADOWCOLOR 218 218 218
     #SHADOWSIZE 2 2
     TYPE TRUETYPE
     FONT arial
     SIZE 7
     ANTIALIAS TRUE
   END # end of label
   POSITION ul
END

WEB
   MAXSCALE 5000000
   IMAGEPATH "/var/www/html/tmp/"
   IMAGEURL "/tmp/"
  METADATA
    "wfs_title"            "COVA-OSGWSP WFS Testing Service"  ## REQUIRED
    "wfs_onlineresource"   "http://deq2.bse.vt.edu/cgi-bin/mapserv?map=/var/www/html/mapserv/wooomm_result.map&"  ## Recommended
    "wfs_srs"               "EPSG:4326"  ## Recommended
    "wfs_abstract"       "This text describes my WFS service." ## Recommended
    "wfs_enable_request" "*"  # necessary
    "ows_schemas_location" "http://ogc.dmsolutions.ca"  ## Optional
  END
   TEMPLATE webmap.html
   VALIDATION
      'runid'   '[0-9a-zA-Z_\-]+$'
      'runid1'   '[0-9a-zA-Z_\-]+$'
      'runid2'   '[0-9a-zA-Z_\-]+$'
      'model_version'    '[0-9a-zA-Z_\-]+$'
      'div1'     '[0-9\.\-]+$'
      'div2'     '[0-9\.\-]+$'
      'div3'     '[0-9\.\-]+$'
      'div4'     '[0-9\.\-]+$'
      'propname'     '[0-9a-zA-Z_\-]+$'
      'propname1'     '[0-9a-zA-Z_\-]+$'
      'propname2'     '[0-9a-zA-Z_\-]+$'
      'bundle'     '[0-9a-zA-Z_\-]+$'
      'ftype'     '[0-9a-zA-Z_\-]+$'
      'default_runid' 'runid_11'
      'default_runid1' 'runid_11'
      'default_runid2' 'runid_12'
      'default_model_version' 'vahydro-1.0'
      'default_div1' '-0.15'
      'default_div2' '-0.05'
      'default_div3' '0.05'
      'default_div4' '0.15'
      'default_propname' 'wd_mgd'
      'default_propname1' 'auglowflow'
      'default_propname2' 'auglowflow'
      'default_bundle' 'watershed'
      'default_ftype' 'vahydro'
   END
END

LAYER
   NAME model_element_info
   METADATA
      "wfs_title"    "Model Element Info" ## REQUIRED
      "wfs_srs"           "EPSG:4326" ## REQUIRED
      "gml_featureid" "hydroid" ## REQUIRED
      "gml_include_items" "all"  ## Optional (serves all attributes for layer)
      "wfs_enable_request" "*"
	  "wfs_version" "1.0.0"
   END
   CONNECTIONTYPE postgis
   CONNECTION "host=192.168.0.21 user=postgres dbname=model"
   TYPE POLYGON
   STATUS DEFAULT
   DUMP TRUE
   DEBUG OFF
   DATA "dh_geofield_geom FROM (select b.dh_geofield_geom, a.hydroid, a.name, a.ftype from dh_feature as a where a.ftype in ('vahydro') and a.bundle = '%bundle%' ) AS foo USING UNIQUE hydroid"
   #FILTER "runid = 22"
   TEMPLATE webmap.html
   #MINSCALE 1000
   #MAXSCALE 50000
   CLASS
      #SYMBOL 'circle'
      #SIZE 11
      NAME "Watershed Bounds"
      COLOR 245 245 245
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
   END
   TOLERANCE 10
   PROJECTION
   # EPSG SRID = 4326
     "init=epsg:4326"
   END
END

LAYER
   NAME model_run_info
   METADATA
      "wfs_title"    "Model Run Status Info" ## REQUIRED
      "wfs_srs"           "EPSG:4326" ## REQUIRED
      "gml_featureid" "hydroid" ## REQUIRED
      "gml_include_items" "all"  ## Optional (serves all attributes for layer)
      "wfs_enable_request" "*"
	  "wfs_version" "1.0.0"
   END
   CONNECTIONTYPE postgis
   CONNECTION "host=192.168.0.21 user=postgres dbname=drupal.dh03"
   TYPE POLYGON
   STATUS OFF
   DUMP TRUE
   DEBUG OFF
   # Query ties a control point to its parent
   DATA "dh_geofield_geom FROM (
     select g.dh_geofield_geom, 
       b.pid, a.propcode as model_version, 
       f.name, f.ftype, 
       b.propname as runid, 
       c.propvalue
     from dh_feature as f 
     from dh_properties as a 
     on ( 
       f.hydroid = a.featureid 
       and a.propname = '%model_version%'
     ) 
     left outer join dh_properties as b 
     on ( 
       a.pid = b.featureid 
       and b.propname = '%runid%'
     ) 
     left outer join dh_properties as c 
     on ( 
       b.pid = c.featureid 
       and c.propname = '%propname%' 
     ) 
     where f.ftype in (
       'vahydro'
       ) 
       and a.propcode = '%model_version%'
       and b.propname = '%runid%'
       and c.propname = '%propname%' 
     ) AS foo USING UNIQUE pid"
   FILTER "model_version = '%model_version%' and runid = '%runid%' and propname = '%propname%' "
   TEMPLATE webmap.html
   LABELITEM "name"
   #MINSCALE 1000
   #MAXSCALE 50000
   CLASS
      NAME Class1
      EXPRESSION ( [propvalue] < %div1% )
      NAME "Watershed Bounds"
      #COLOR 245 245 245
      COLOR 100 100 100
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME Class2
      EXPRESSION ( [propvalue] >= %div1% and [propvalue] < %div2% )
      NAME "Watershed Bounds"
      #COLOR 245 245 245
      COLOR 150 150 150
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME Class3
      EXPRESSION ( [propvalue] >= %div2% and [propvalue] < %div3% )
      NAME "Watershed Bounds"
      COLOR 200 200 200
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME Class4
      EXPRESSION ( [propvalue] >= %div3% )
      COLOR 245 245 245
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME Defclass
      #COLOR 245 245 245
      COLOR 162 181 205
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   TOLERANCE 10
   PROJECTION
   # EPSG SRID = 4326
     "init=epsg:4326"
   END
END


LAYER
   NAME model_point_scaled
   METADATA
      "wfs_title"    "Model Withdrawal Point Information" ## REQUIRED
      "wfs_srs"           "EPSG:4326" ## REQUIRED
      "gml_featureid" "system_nid" ## REQUIRED
      "gml_include_items" "all"  ## Optional (serves all attributes for layer)
      "wfs_enable_request" "*"
   END
   #GROUP vwuds_max
   CONNECTIONTYPE postgis
   CONNECTION "host=192.168.0.21 user=wsp_ro dbname=model"
   TYPE POINT
   STATUS off
   DUMP TRUE
   DEBUG OFF
   # Query ties a control point to its parent
   DATA "point_geom FROM (
     select a.point_geom, b.hydroid, a.scenarioid, a.name, 
       a.ftype, a.custom2, b.runid, b.propname, b.propvalue, b.datatext, 
       (4 * ceil(sqrt((b.propvalue)))) as curr_scale        
     from scen_model_element as a left outer join dh_properties as b 
     on ( a.hydroid = b.hydroid) 
     where a.ftype in ('cova_withdrawal') 
       and a.scenarioid = %model_version% 
       and b.runid = %runid% 
       and b.propname = '%propname%' 
     ) AS foo USING UNIQUE hydroid"
   FILTER "scenarioid = %model_version% and runid = %runid% and propname = '%propname%' "
   TEMPLATE drought.html
   #MINSCALE 1000
   #MAXSCALE 50000
   CLASS
      STYLE
         SYMBOL 'circle'
         SIZE [curr_scale]
         COLOR 100 149 237
         BACKGROUNDCOLOR 245 245 245
         OUTLINECOLOR 0 0 0
      END
      NAME "Withdrawals"
   END
   TOLERANCE 10
   PROJECTION
   # EPSG SRID = 4326
     "init=epsg:4326"
   END
END

LAYER
   NAME model_run_info_abs100
   METADATA
      "wfs_title"    "Model Run Status Info" ## REQUIRED
      "wfs_srs"           "EPSG:4326" ## REQUIRED
      "gml_featureid" "hydroid" ## REQUIRED
      "gml_include_items" "all"  ## Optional (serves all attributes for layer)
      "wfs_enable_request" "*"
	  "wfs_version" "1.0.0"
   END
   CONNECTIONTYPE postgis
   CONNECTION "host=192.168.0.21 user=postgres dbname=model"
   TYPE POLYGON
   STATUS OFF
   DUMP TRUE
   DEBUG OFF
   # Query ties a control point to its parent
   DATA "dh_geofield_geom FROM (select a.dh_geofield_geom, b.hydroid, a.scenarioid, a.name, a.ftype, a.custom2, b.runid, b.propname,
      CASE
         WHEN b.propvalue is null THEN -99999      
         ELSE b.propvalue 
      END as propvalue, 
   b.datatext from scen_model_element as a left outer join dh_properties as b on ( a.hydroid = b.hydroid) where a.ftype in ('cova_ws_subnodal', 'cova_ws_container') and a.scenarioid = %model_version% and b.runid = %runid% and b.propname = '%propname%' ) AS foo USING UNIQUE hydroid"
   FILTER "scenarioid = %model_version% and runid = %runid% and propname = '%propname%' "
   TEMPLATE webmap.html
   #LABELITEM "name"
   #MINSCALE 1000
   #MAXSCALE 50000
   CLASS
      EXPRESSION ( [propvalue] >= 0.0 and [propvalue] < 5.0 )
      NAME "0 to 10.0"
      COLOR 223 223 226
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      EXPRESSION ( [propvalue] > 5.0 and [propvalue] < 10.0 )
      NAME "10.0 to 25.0"
      COLOR 192 192 197
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      EXPRESSION ( [propvalue] > 10.0 and [propvalue] < 25.0 )
      NAME "25.0 to 50.0"
      COLOR 161 160 168
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      EXPRESSION ( [propvalue] > 25.0 and [propvalue] < 50.0 )
      NAME "50.0 to 100.0"
      COLOR 129 129 139
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      EXPRESSION ( [propvalue] > 50.0 and [propvalue] < 100.0 )
      NAME "100.0 to 200.0"
      COLOR 98 97 110
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      EXPRESSION ( [propvalue] > 100.0 )
      NAME "Greater than 100.0"
      COLOR 67 66 81
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME "Undefined"
      COLOR 0 0 0
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      STYLE
        SYMBOL "hatch-simple"
        COLOR 255 255 255
        SIZE 10
        WIDTH 6
        ANGLE 45
        OPACITY 10
      END # STYLE
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   TOLERANCE 10
   PROJECTION
   # EPSG SRID = 4326
     "init=epsg:4326"
   END
END

LAYER
  NAME model_run_info_abs200
  METADATA
    "wfs_title"    "Model Run Status Info" ## REQUIRED
    "wfs_srs"           "EPSG:4326" ## REQUIRED
    "gml_featureid" "hydroid" ## REQUIRED
    "gml_include_items" "all"  ## Optional (serves all attributes for layer)
    "wfs_enable_request" "*"
  "wfs_version" "1.0.0"
  END
  CONNECTIONTYPE postgis
  CONNECTION "host=192.168.0.21 user=postgres dbname=drupal.dh03"
  TYPE POLYGON
  STATUS OFF
  DUMP TRUE
  DEBUG OFF
  # Query ties a control point to its parent
  DATA "dh_geofield_geom FROM (
    select geo.dh_geofield_geom, b.hydroid, a.scenarioid, 
      a.name, a.ftype, a.custom2, b.runid, 
      b.propname, b.propvalue, b.datatext 
    from dh_feature as a 
    left outer join dh_properties as model
    on ( 
      a.hydroid = model.featureid
      and model.entity_type = 'dh_feature'
      and model.propcode = 'vahydro-1.0'
    ) 
    left outer join dh_properties as scen
    on ( 
      model.pid = scen.featureid
      and scen.entity_type = 'dh_properties'
    ) 
    left outer join dh_properties as att
    on ( 
      scen.pid = att.featureid
      and att.entity_type = 'dh_properties'
      and att.propname = '%propname%' 
    ) 
    where a.ftype = 'vahydro'
      and b.pid is not null 
      and a.scenarioid = %model_version% 
      and b.runid = %runid% and b.propname = '%propname%' 
    ) AS foo USING UNIQUE hydroid"
  FILTER "scenarioid = %model_version% and runid = %runid% and propname = '%propname%' "
  TEMPLATE webmap.html
  #LABELITEM "name"
  #MINSCALE 1000
  #MAXSCALE 50000
  CLASS
    EXPRESSION ( [propvalue] > 0.0 and [propvalue] < 10.0 )
    NAME "0 to 10.0"
    COLOR 223 223 226
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  CLASS
    EXPRESSION ( [propvalue] > 10.0 and [propvalue] < 25.0 )
    NAME "10.0 to 25.0"
    COLOR 192 192 197
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  CLASS
    EXPRESSION ( [propvalue] > 25.0 and [propvalue] < 50.0 )
    NAME "25.0 to 50.0"
    COLOR 161 160 168
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  CLASS
    EXPRESSION ( [propvalue] > 50.0 and [propvalue] < 100.0 )
    NAME "50.0 to 100.0"
    COLOR 129 129 139
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  CLASS
    EXPRESSION ( [propvalue] > 100.0 and [propvalue] < 200.0 )
    NAME "100.0 to 200.0"
    COLOR 98 97 110
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  CLASS
    EXPRESSION ( [propvalue] > 200.0 )
    NAME "Greater than 200.0"
    COLOR 67 66 81
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  CLASS
    NAME "0.0"
    COLOR 255 255 255
    BACKGROUNDCOLOR 0 0 0
    OUTLINECOLOR 0 0 0
    LABEL
      COLOR 132 31 31
      TYPE TRUETYPE
      FONT arial
      SIZE 8
      ANTIALIAS TRUE
      POSITION CC
      PARTIALS FALSE
      MINDISTANCE 8000
    END
  END
  TOLERANCE 10
  PROJECTION
  # EPSG SRID = 4326
   "init=epsg:4326"
  END
END


LAYER
   NAME model_run_compare
   METADATA
      "wfs_title"    "Model Run Comparison Info" ## REQUIRED
      "wfs_srs"           "EPSG:4326" ## REQUIRED
      "gml_featureid" "hydroid" ## REQUIRED
      "gml_include_items" "all"  ## Optional (serves all attributes for layer)
	   "gml_delta_pct_type" "double"
	   "gml_propvalue_run1_type" "double"
	   "gml_propvalue_run2_type" "double"
	   "gml_run1_id_type" "integer"
	   "gml_run2_id_type" "integer"
	   "gml_delta_pct_type" "double"
      "wfs_enable_request_type" "*"
	   "wfs_version" "1.0.0"
   END
   VALIDATION
   END
   CONNECTIONTYPE postgis
   CONNECTION "host=192.168.0.21 user=postgres dbname=model"
   TYPE POLYGON
   STATUS OFF
   DUMP TRUE
   DEBUG OFF
   # Query only uses parent
   # Try to include HUC screening
   # DATA "dh_geofield_geom FROM ( select a.dh_geofield_geom, a.name, a.hydroid, foo.runid as run1_id, bar.runid as run2_id, foo.propvalue as propvalue_run1, bar.propvalue as propvalue_run2, CASE WHEN ( (foo.propvalue is null) or (bar.propvalue is null) ) THEN NULL WHEN foo.propvalue > 0 THEN round(((bar.propvalue - foo.propvalue) / foo.propvalue)::numeric,4) ELSE 0.0 END as delta_pct from scen_model_element as a left outer join dh_properties as foo on (a.hydroid = foo.hydroid and foo.runid = %runid1% and foo.propname = '%propname1%' )  left outer join dh_properties as bar on (a.hydroid = bar.hydroid and bar.runid = %runid2% and bar.propname = '%propname2%' ) left outer join huc_va as palooza on (a.the_geom && palooza.the_geom and contains(palooza.the_geom,  ST_PointOnSurface(a.dh_geofield_geom)) ) where a.scenarioid = %model_version% and ( (palooza.huc = '%huc%') OR ('%huc%' = '') ) ) AS foobar USING UNIQUE hydroid"
   #
   DATA "dh_geofield_geom FROM ( select a.dh_geofield_geom, a.name, a.hydroid, foo.propname, foo.runid as run1_id, bar.runid as run2_id, foo.propvalue as propvalue_run1, bar.propvalue as propvalue_run2, CASE WHEN ( (foo.propvalue is null) or (bar.propvalue is null) ) THEN -99999 WHEN foo.propvalue > 0 THEN round(((bar.propvalue - foo.propvalue) / foo.propvalue)::numeric,4) ELSE 0.0 END as delta_pct from scen_model_element as a left outer join dh_properties as foo on (a.hydroid = foo.hydroid and foo.runid = %runid1% and foo.propname = '%propname1%' )  left outer join dh_properties as bar on (a.hydroid = bar.hydroid and bar.runid = %runid2% and bar.propname = '%propname2%' )  where a.scenarioid = %model_version% AND a.ftype in ('cova_ws_subnodal', 'cova_ws_container') ) AS foobar USING UNIQUE hydroid"
   TEMPLATE webmap.html
   LABELITEM "name"
   #MINSCALE 1000
   #MAXSCALE 50000
   CLASS
      NAME "More than -15%"
      EXPRESSION ( ([delta_pct] < %div1%) and ([delta_pct] > -99999 ) )
      COLOR 205 102 102
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME "-15% to -5%"
      EXPRESSION ( [delta_pct] >= %div1% and [delta_pct] < %div2% )
      COLOR 255 211 127
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME "-5% to +5%"
      EXPRESSION ( [delta_pct] >= %div2% and [delta_pct] < %div3% )
      COLOR 194 158 215
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME "+5% to +15%"
      EXPRESSION ( [delta_pct] >= %div3% and [delta_pct] < %div4% )
      COLOR 102 153 205
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      NAME "Greater than +15%"
      EXPRESSION ( [delta_pct] >= %div4% )
      COLOR 171 205 102
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   CLASS
      EXPRESSION ( [delta_pct] == -99999)
      NAME "No Data"
      COLOR 204 204 204
      BACKGROUNDCOLOR 0 0 0
      OUTLINECOLOR 0 0 0
      STYLE
        SYMBOL "hatch-simple"
        COLOR 255 255 255
        SIZE 10
        WIDTH 6
        ANGLE 45
        OPACITY 10
      END # STYLE
      LABEL
        COLOR 132 31 31
        TYPE TRUETYPE
        FONT arial
        SIZE 8
        ANTIALIAS TRUE
        POSITION CC
        PARTIALS FALSE
        MINDISTANCE 8000
      END
   END
   TOLERANCE 10
   PROJECTION
   # EPSG SRID = 4326
     "init=epsg:4326"
   END
END

LAYER
  NAME infolayer
  STATUS ON
  TYPE annotation
  TRANSFORM false
  FEATURE
    POINTS
      425 35 #this is the position of the text in image coordinates (pixels)
    END
    TEXT " Comparison of %propname1% metrics for runs %runid1% and %runid2%    " #this is your displaying text
  END   
  CLASS
    #NAME thislabel
    EXPRESSION ( %propname1% == 'auglowflow' )
    LABEL #defines the font, colors etc. of the text
      TEXT "      Comparison of August Low-Flow metrics      "
      FONT "arial"
      TYPE TRUETYPE
      SIZE 10
      BUFFER 1
      COLOR 0 0 0
      FORCE TRUE
    END
  END 
  CLASS
    #NAME thislabel
    EXPRESSION ( %propname1% == '7q10' )
    LABEL #defines the font, colors etc. of the text
      TEXT "      Comparison of 7Q10 metrics      "
      FONT "arial"
      TYPE TRUETYPE
      SIZE 10
      BUFFER 1
      COLOR 0 0 0
      FORCE TRUE
    END
  END 
  CLASS
    LABEL #defines the font, colors etc. of the text
      TEXT "      Comparison of metrics      "
      FONT "arial"
      TYPE TRUETYPE
      SIZE 10
      BUFFER 1
      COLOR 0 0 0
      FORCE TRUE
    END
  END 
END
#map definition end
END
